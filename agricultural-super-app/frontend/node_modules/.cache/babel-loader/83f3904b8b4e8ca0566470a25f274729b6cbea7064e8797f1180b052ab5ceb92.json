{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { updateUserProfile } from '../services/userService';\nexport const updateProfile = createAsyncThunk('user/updateProfile', async (userData, {\n  rejectWithValue,\n  getState\n}) => {\n  try {\n    var _getState$auth$user;\n    const userId = (_getState$auth$user = getState().auth.user) === null || _getState$auth$user === void 0 ? void 0 : _getState$auth$user.id;\n    if (!userId) throw new Error('User not authenticated');\n    return await updateUserProfile(userId, userData);\n  } catch (error) {\n    return rejectWithValue(error.message);\n  }\n});\nconst userSlice = createSlice({\n  name: 'user',\n  initialState: {\n    profile: null,\n    status: 'idle',\n    error: null,\n    loading: false\n  },\n  reducers: {\n    setProfile: (state, action) => {\n      state.profile = action.payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(updateProfile.pending, state => {\n      state.status = 'loading';\n      state.error = null;\n    }).addCase(updateProfile.fulfilled, (state, action) => {\n      state.status = 'succeeded';\n      state.profile = action.payload;\n    }).addCase(updateProfile.rejected, (state, action) => {\n      state.status = 'failed';\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  setProfile\n} = userSlice.actions;\nexport default userSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","updateUserProfile","updateProfile","userData","rejectWithValue","getState","_getState$auth$user","userId","auth","user","id","Error","error","message","userSlice","name","initialState","profile","status","loading","reducers","setProfile","state","action","payload","extraReducers","builder","addCase","pending","fulfilled","rejected","actions","reducer"],"sources":["/home/trevour/moringa-school-work/phase-5/Agricultural-Super-App-/agricultural-super-app/frontend/src/features/userSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { updateUserProfile } from '../services/userService';\n\nexport const updateProfile = createAsyncThunk(\n  'user/updateProfile',\n  async (userData, { rejectWithValue, getState }) => {\n    try {\n      const userId = getState().auth.user?.id;\n      if (!userId) throw new Error('User not authenticated');\n      return await updateUserProfile(userId, userData);\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nconst userSlice = createSlice({\n  name: 'user',\n  initialState: {\n    profile: null,\n    status: 'idle',\n    error: null,\n    loading: false\n  },\n  reducers: {\n    setProfile: (state, action) => {\n      state.profile = action.payload;\n    }\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(updateProfile.pending, (state) => {\n        state.status = 'loading';\n        state.error = null;\n      })\n      .addCase(updateProfile.fulfilled, (state, action) => {\n        state.status = 'succeeded';\n        state.profile = action.payload;\n      })\n      .addCase(updateProfile.rejected, (state, action) => {\n        state.status = 'failed';\n        state.error = action.payload;\n      });\n  }\n});\n\nexport const { setProfile } = userSlice.actions;\nexport default userSlice.reducer;"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAChE,SAASC,iBAAiB,QAAQ,yBAAyB;AAE3D,OAAO,MAAMC,aAAa,GAAGF,gBAAgB,CAC3C,oBAAoB,EACpB,OAAOG,QAAQ,EAAE;EAAEC,eAAe;EAAEC;AAAS,CAAC,KAAK;EACjD,IAAI;IAAA,IAAAC,mBAAA;IACF,MAAMC,MAAM,IAAAD,mBAAA,GAAGD,QAAQ,CAAC,CAAC,CAACG,IAAI,CAACC,IAAI,cAAAH,mBAAA,uBAApBA,mBAAA,CAAsBI,EAAE;IACvC,IAAI,CAACH,MAAM,EAAE,MAAM,IAAII,KAAK,CAAC,wBAAwB,CAAC;IACtD,OAAO,MAAMV,iBAAiB,CAACM,MAAM,EAAEJ,QAAQ,CAAC;EAClD,CAAC,CAAC,OAAOS,KAAK,EAAE;IACd,OAAOR,eAAe,CAACQ,KAAK,CAACC,OAAO,CAAC;EACvC;AACF,CACF,CAAC;AAED,MAAMC,SAAS,GAAGf,WAAW,CAAC;EAC5BgB,IAAI,EAAE,MAAM;EACZC,YAAY,EAAE;IACZC,OAAO,EAAE,IAAI;IACbC,MAAM,EAAE,MAAM;IACdN,KAAK,EAAE,IAAI;IACXO,OAAO,EAAE;EACX,CAAC;EACDC,QAAQ,EAAE;IACRC,UAAU,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;MAC7BD,KAAK,CAACL,OAAO,GAAGM,MAAM,CAACC,OAAO;IAChC;EACF,CAAC;EACDC,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CACJC,OAAO,CAACzB,aAAa,CAAC0B,OAAO,EAAGN,KAAK,IAAK;MACzCA,KAAK,CAACJ,MAAM,GAAG,SAAS;MACxBI,KAAK,CAACV,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACDe,OAAO,CAACzB,aAAa,CAAC2B,SAAS,EAAE,CAACP,KAAK,EAAEC,MAAM,KAAK;MACnDD,KAAK,CAACJ,MAAM,GAAG,WAAW;MAC1BI,KAAK,CAACL,OAAO,GAAGM,MAAM,CAACC,OAAO;IAChC,CAAC,CAAC,CACDG,OAAO,CAACzB,aAAa,CAAC4B,QAAQ,EAAE,CAACR,KAAK,EAAEC,MAAM,KAAK;MAClDD,KAAK,CAACJ,MAAM,GAAG,QAAQ;MACvBI,KAAK,CAACV,KAAK,GAAGW,MAAM,CAACC,OAAO;IAC9B,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEH;AAAW,CAAC,GAAGP,SAAS,CAACiB,OAAO;AAC/C,eAAejB,SAAS,CAACkB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}